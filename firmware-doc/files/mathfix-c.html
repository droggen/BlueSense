<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>mathfix.c</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script type="text/javascript" src="../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.0 (Development Release 08-22-2015) -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="mathfix"></a><a name="Topic130"></a><div class="CTopic TFile LC first">
 <div class="CTitle">mathfix</div>
 <div class="CBody"><p>Provides fixed point mathematic functions.</p><p>Some code from: <a href="https://developer.mbed.org/users/sravet/code/fixedpoint/docs/tip/fixed__func_8h_source.html" target="_top">https://&#8203;developer&#8203;.mbed&#8203;.org&#8203;/users&#8203;/sravet&#8203;/code&#8203;/fixedpoint&#8203;/docs&#8203;/tip&#8203;/fixed__func_8h_source&#8203;.html</a> <a href="https://developer.mbed.org/users/sravet/code/fixedpoint/docs/aa2871c4c041/fixed__func_8cpp_source.html" target="_top">https://&#8203;developer&#8203;.mbed&#8203;.org&#8203;/users&#8203;/sravet&#8203;/code&#8203;/fixedpoint&#8203;/docs&#8203;/aa2871c4c041&#8203;/fixed__func_8cpp_source&#8203;.html</a></p><p>Benchmark of reciprocal square root show the following performance from slowest to fastest: 1) 1.0/sqrt:	29uS	(reference, accurate) 2) invSqrt3:	15us	(quake algorithm with fixed-point Newton-Raphson) 3) fixrsqrt15:	10uS	(only without any Newton-Raphson iteration)</p></div>
</div>

<a name="Functions"></a><a name="Topic131"></a><div class="CTopic TGroup LC">
 <div class="CTitle">Functions</div>
</div>

<a name="fixmul16"></a><a name="Topic132"></a><div class="CTopic TFunction LC">
 <div class="CTitle">fixmul16</div>
 <div class="CBody"><p>Multiples two signed fixed-point numbers in 16.16 format and return a 16.16 number.&nbsp; Uses internally a 64-bit multiplication to minimize risks of overflows.</p></div>
</div>

<a name="fixmulf16"></a><a name="Topic133"></a><div class="CTopic TFunction LC">
 <div class="CTitle">fixmulf16</div>
 <div class="CBody"><p>Multiples two signed fixed-point numbers in 16.16 format and return a 16.16 number.&nbsp; Uses internally a 32-bit multiplication; this is faster than fixmul16 but risks overflowing.</p></div>
</div>

<a name="fixrsqrt16"></a><a name="Topic134"></a><div class="CTopic TFunction LC">
 <div class="CTitle">fixrsqrt16</div>
 <div class="CBody"><p>Computes 1/sqrt(a) of the signed fixed-point number a in 16.16 format and returns a 16.16 number.&nbsp; The maximum number is 32767.0. The function returns 32767.0 when a=0.0.</p><p>The number of newton raphson iterations can be tweaked. Originally it is 3.</p><p>Analysis from 2^-16 to 2^15 shows errors in % as follows: No Newton Raphson: Average error: 0.038767 min error: -0.001792 max error: 0.409314</p><div class="CHeading">1 Newton Raphson</div><p>Average error: 0.008124 min error: -0.171116 max error: 0.412059</p><div class="CHeading">2 Newton Raphson</div><p>Average error: 0.011530 min error: -0.040427 max error: 0.410701</p><div class="CHeading">3 Newton Raphson</div><p>Average error: 0.011951 min error: -0.005125 max error: 0.410023</p><div class="CHeading">4 Newton Raphson</div><p>Average error: 0.011979 min error: -0.005174 max error: 0.409679</p><div class="CHeading">5 Newton Raphson</div><p>Average error: 0.011964 min error: -0.005125 max error: 0.409507</p><div class="CHeading">10 Newton Raphson</div><p>Average error: 0.011976 min error: -0.005174 max error: 0.409345</p><p>Error is distributed with fixed point yielding most often a larger value than floating point. This may be an issue for normalisation.</p></div>
</div>

<a name="invSqrt3"></a><a name="Topic135"></a><div class="CTopic TFunction LC last">
 <div class="CTitle">invSqrt3</div>
 <div id="NDPrototype135" class="NDPrototype WideForm CStyle"><table><tr><td class="PBeforeParameters">_Accum invSqrt3(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first">_Accum&nbsp;</td><td class="PName last">x</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div>
 <div class="CBody"><p>Reciprocal square root.&nbsp; Uses the quake algorithm with a fixed point Newton-Raphson step.&nbsp; Internally uses a float representation which pulls conversion from fixed to float and back.</p></div>
</div>

</body></html>