<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>boot.c</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script type="text/javascript" src="../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.0 (Development Release 08-22-2015) -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="boot"></a><a name="Topic208"></a><div class="CTopic TFile LC first">
 <div class="CTitle">boot</div>
 <div class="CBody"><p>Functions to call the bootloader from the firmware.</p><p>The assumption is that the firmware is able to detect a programming command start and jumps to the bootloader code which is capable of modifying the firmware.&nbsp; The register UBRR0 is used to indicate whether the bootloader should listen to the dbg/usb interface (UBRR0=250) or the Bluetooth interface (UBRR0=251).</p><p>The bootloader does not put in place an interrupt routine for all the peripherals used in the application code.&nbsp; It is therefore mandatory to disable the interrupts on all the peripherals prior to entering the bootloder, otherwise if an interrupt is fired which is not handled by the bootloader the bootloader would reset or enter a boot loop.</p><p>The application code uses the following interrupt vectors (marked with * the ones used by the bootloader as well): 4	PCINT0 6	PCINT2 7	PCINT3 *13	TIMER1_COMPA 22	USART0_TX 24	ADC *26	TWI *28	USART1_RX *29	USART1_UDRE</p></div>
</div>

<a name="Functions"></a><a name="Topic209"></a><div class="CTopic TGroup LC">
 <div class="CTitle">Functions</div>
</div>

<a name="boot_dbg"></a><a name="Topic210"></a><div class="CTopic TFunction LC">
 <div class="CTitle">boot_dbg</div>
 <div id="NDPrototype210" class="NDPrototype WideForm CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">void</span> boot_dbg(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">void</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div>
 <div class="CBody"><p>Calls the bootloader and passes in UBRR0 the indication that the bootloader command has been received on the USB interface.</p></div>
</div>

<a name="boot_bluetooth"></a><a name="Topic211"></a><div class="CTopic TFunction LC last">
 <div class="CTitle">boot_bluetooth</div>
 <div id="NDPrototype211" class="NDPrototype WideForm CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">void</span> boot_bluetooth(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">void</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div>
 <div class="CBody"><p>Calls the bootloader and passes in UBRR0 the indication that the bootloader command has been received on the Bluetooth interface.</p></div>
</div>

</body></html>